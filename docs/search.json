[
  {
    "objectID": "session2.html",
    "href": "session2.html",
    "title": "2. Working with Data",
    "section": "",
    "text": "Learning Objectives\n\n\n\n\nLoading, exploring and saving data\nLearn to manipulate data frames with tidyverse\nOverview of ggplot2 for data visualization"
  },
  {
    "objectID": "session2.html#data-import-and-export",
    "href": "session2.html#data-import-and-export",
    "title": "2. Working with Data",
    "section": "2.1 Data import and export",
    "text": "2.1 Data import and export\n\npackage readr reads txt, csv, Rdata (or rda).\npackage haven reads SPSS, Stata, and SAS files.\npackage readxl reads excel files (both .xls and .xlsx).\n\n\nlibrary(tidyverse)\nco2 <- read_csv(file = \"co2_mm_gl_clean.csv\")\n\n\nLooking at the data\n\n\n\nco2\nLook at the whole data frame\n\n\n\n\nhead(co2)\nLook at the first few rows\n\n\ntail(co2)\nLook at the last few rows\n\n\ncolnames(co2)\nNames of the columns in the data frame\n\n\nattributes(co2)\nAttributes of the data frame\n\n\ndim(co2)\nDimensions of the data frame\n\n\nncol(co2)\nNumber of columns\n\n\nnrow(co2)\nNumber of rows\n\n\nsummary(co2)\nSummary statistics\n\n\nstr(co2)\nStructure of the data frame\n\n\n\n\nstr(co2)\n\nspec_tbl_df [526 x 5] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n $ year   : num [1:526] 1979 1979 1979 1979 1979 ...\n $ month  : num [1:526] 1 2 3 4 5 6 7 8 9 10 ...\n $ decimal: num [1:526] 1979 1979 1979 1979 1979 ...\n $ average: num [1:526] 337 337 338 338 338 ...\n $ stddev : num [1:526] 0.1 0.09 0.1 0.11 0.04 0.17 0.27 0.29 0.2 0.22 ...\n - attr(*, \"spec\")=\n  .. cols(\n  ..   year = col_double(),\n  ..   month = col_double(),\n  ..   decimal = col_double(),\n  ..   average = col_double(),\n  ..   stddev = col_double()\n  .. )\n - attr(*, \"problems\")=<externalptr> \n\nsummary(co2) \n\n      year          month           decimal        average     \n Min.   :1979   Min.   : 1.000   Min.   :1979   Min.   :334.4  \n 1st Qu.:1989   1st Qu.: 3.250   1st Qu.:1990   1st Qu.:353.2  \n Median :2000   Median : 6.000   Median :2001   Median :369.7  \n Mean   :2000   Mean   : 6.481   Mean   :2001   Mean   :372.6  \n 3rd Qu.:2011   3rd Qu.: 9.000   3rd Qu.:2012   3rd Qu.:391.3  \n Max.   :2022   Max.   :12.000   Max.   :2023   Max.   :418.5  \n     stddev       \n Min.   :0.03000  \n 1st Qu.:0.08000  \n Median :0.10000  \n Mean   :0.09894  \n 3rd Qu.:0.11000  \n Max.   :0.29000  \n\n\n\n\nRenaming variables\n\ncolnames(co2)[5]\n\n[1] \"stddev\"\n\ncolnames(co2)[5] <- \"sd\"\ncolnames(co2)\n\n[1] \"year\"    \"month\"   \"decimal\" \"average\" \"sd\"     \n\n\n\n\nCreating new variables\n\nco2$lowerbound_1sd <- co2$average - 1*co2$sd\nco2$upperbound_1sd <- co2$average + 1*co2$sd\nhead(co2)\n\n# A tibble: 6 x 7\n   year month decimal average    sd lowerbound_1sd upperbound_1sd\n  <dbl> <dbl>   <dbl>   <dbl> <dbl>          <dbl>          <dbl>\n1  1979     1   1979.    337.  0.1            336.           337.\n2  1979     2   1979.    337.  0.09           337.           337.\n3  1979     3   1979.    338.  0.1            338.           338.\n4  1979     4   1979.    338.  0.11           338.           338.\n5  1979     5   1979.    338.  0.04           338.           338.\n6  1979     6   1979.    337.  0.17           337.           338.\n\n\n\n\nSubsetting data\n\n# extracting data between 2020 and 2022;\nco2_2020_2022 <- subset(co2, year >= 2020 & year <=2022)\n\n# subletting directly from dataframe using index;\n# try at home;\n# co2_2020_2022 <- CO2[CO2year >= 2020 & year <=2022, ]  # Select observations with year between 2020 and 2022;\n\n\nwe can export data from r using write function\n\n\nwrite.csv(co2, file = 'co2_mm_gl_clean2.csv')"
  },
  {
    "objectID": "session2.html#data-manipulation-with-tidyverse-a-crush-introduction",
    "href": "session2.html#data-manipulation-with-tidyverse-a-crush-introduction",
    "title": "2. Working with Data",
    "section": "2.2 Data manipulation with tidyverse (a crush introduction)",
    "text": "2.2 Data manipulation with tidyverse (a crush introduction)\n\n\n\n\n\n\nWhat is the Tidyverse?\nThe tidyverse consists of a few key packages: - dplyr: data manipulation - ggplot2: data visualization - tibble: tibbles, a modern re-imagining of data frames - tidyr: data tidying - readr: data import - purrr: functional programming, e.g.Â alternate approaches to apply\n\n\n\n\nPipe operator %>%\nPipes are operators that send what comes before the pipe to what comes after.\nfrequently used in tidyverse!\n\n\nSelecting Columns and Rows\n\nExample: using %>% to subset data\n\nselect() in dplyr subset columns by names\nfilter() subset rows using column values\n\n\n\n# selecting columns;\nco2 %>%\n  select(year, month, average) %>%\n  head()\n\n# drop some variables;\nco2 %>%\n  select(-month) %>%\n  head()\n\nSometimes, we have a lot of variables to select, and if they have a common naming scheme, this can be very easy.\n\nco2 %>%\n  select(contains(\"bound\")) %>%\n  head()\n\n\nOver helpful functions to be used within select()\n\nstarts_with: starts with a prefix\nends_with: ends with a suffix\ncontains: contains a literal string\nmatches: matches a regular expression\nnum_range: a numerical range like wk1, wk2, wk3.\n\nselect(num_range(\"wk\", 1:3))\n\neverything: all variables.\n\nExample: using %>% and mutate() to create new variable\n\n\nco2 %>%\n  mutate(lowerbound_2sd = average - 2*sd,\n         upperbound_2sd = average + 2*sd)\n\n\n\nmerge and join\n\n\nggplot2"
  }
]